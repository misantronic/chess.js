function d(b,c){for(b="",i=0;i<a.length,c=a[i];i++)b+="<"+c+" c="+(c.charCodeAt(0)<97?"b":"w")+" i="+i+"></"+c+">";p.innerHTML=b}var a="bcdefdcbaaaaaaaaxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxAAAAAAAABCDEFDCB".split(""),F,i;d(),p.onclick=function(b,c,e,f,g,h,j,k,l,m,n,o){c=b.target,F&&(e=F.tagName,f=c.tagName,g=0,h=F[i="getAttribute"]("i"),j=c[i]("i"),l=c[i]("c"),k=F[i]("c"),m=h==j,n=Math.abs(h-j),m||("A"==e?"X"==f?(("w"==k&&h-j==-8||h>47&&16==n)&&(g=1),("b"==k&&h-j==8||16>h&&16==n)&&(g=1)):(7==n||9==n)&&(g=1):("D"!=e&&"E"!=e||n%7&&n%9||(g=1),"B"!=e&&"E"!=e||n%8&&~~(h/8)!=~~(j/8)||(g=1),"F"==e&&(1==n||n>6&&10>n)&&(g=1),"C"!=e||17!=n&&15!=n&&10!=n&&6!=n||(g=1)),"X"!=f&&k!=l&&(o=1),g&&(a[j]="w"==k?e.toLowerCase():e,a[h]="x",F=0,d()))),F="X"==f||o?F:c};